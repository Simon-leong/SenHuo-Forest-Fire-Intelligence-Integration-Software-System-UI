/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.5.0
 * 编译日期：2022-11-03 17:33:53
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-10-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}));
})(this, (function (exports) { 
'use strict';function _0xb5c0(_0x48ab81,_0xeda1d){var _0x43558b=_0x4355();return _0xb5c0=function(_0xb5c0c4,_0x49541e){_0xb5c0c4=_0xb5c0c4-0x1b8;var _0x542388=_0x43558b[_0xb5c0c4];if(_0xb5c0['hmSIWW']===undefined){var _0x10c230=function(_0x8d0d7a){var _0x305d57='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x45dd6f='',_0x1fc8de='';for(var _0x39a1f8=0x0,_0x289e42,_0x28ed71,_0xb87baa=0x0;_0x28ed71=_0x8d0d7a['charAt'](_0xb87baa++);~_0x28ed71&&(_0x289e42=_0x39a1f8%0x4?_0x289e42*0x40+_0x28ed71:_0x28ed71,_0x39a1f8++%0x4)?_0x45dd6f+=String['fromCharCode'](0xff&_0x289e42>>(-0x2*_0x39a1f8&0x6)):0x0){_0x28ed71=_0x305d57['indexOf'](_0x28ed71);}for(var _0x2ea42e=0x0,_0x1bba3f=_0x45dd6f['length'];_0x2ea42e<_0x1bba3f;_0x2ea42e++){_0x1fc8de+='%'+('00'+_0x45dd6f['charCodeAt'](_0x2ea42e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1fc8de);};_0xb5c0['lsfesu']=_0x10c230,_0x48ab81=arguments,_0xb5c0['hmSIWW']=!![];}var _0x1d3b57=_0x43558b[0x0],_0x311fcc=_0xb5c0c4+_0x1d3b57,_0x3b1bde=_0x48ab81[_0x311fcc];return!_0x3b1bde?(_0x542388=_0xb5c0['lsfesu'](_0x542388),_0x48ab81[_0x311fcc]=_0x542388):_0x542388=_0x3b1bde,_0x542388;},_0xb5c0(_0x48ab81,_0xeda1d);}var _0x545692=_0xb5c0;function _0x4355(){var _0x4e7580=['y29UzMLNDxjHyMXL','Eg1PBG','mZbMr0PdCxK','q2fUDMfZv2LUzezPzwXK','ChvZAa','nujxzLjKDW','x2nHBgnFC3bLzwrsyxrL','B3b0Aw9UCW','mZu5odyWr2X2BK5u','mtqWody4men4tKPKBq','zgvMAw5LuhjVCgvYDhK','DMrHDge','zMXVB3i','nJyXnJHIDhrNCKu','Bg9N','DgXHDa','DMfSDwu','y29SCW','nZC1mZHgAujfEKm','CgfYDgLJBgvZtNvTyMvY','z2v0uMfUzg9Ttgf0tg5N','x3nWzwvKuMf0zq','Ew1PBG','zw51BwvYywjSzq','x21HEefNzq','x2nHBgnvvG','x19LC01VzhvSzq','A2v5','C2v0rgf0zq','C2v0t3b0Aw9UCW','mte1odi5DMTYAuzX','x3jHBMrVBvbHCNrPy2XL','Ew1HEa','CM93CW','ChjVDg90ExbL','DgXUzW','CM91BMq','z2v0ugfYDgLJBgvZ','CMfUzg9T','CgfYDgLJBgvZ','nJq4nJG4CM5gB29V','mtaYnZG0nvDNzwDqAq','zgvZDhjVEq','CMv2zxjZzvK','Bgf0','Dg9hCMLKwfK','x2jPBgLUzwfYsw50zxjWB2XHDgLVBG','Eg1HEa','z2v0vvzcEvHz','y2XLyxi','nKHVzgrZDa','Bg5N','Bwf4qwDL','C3bLzwrsyxrL','D3jPDgfIBgu','z3jPza','AxnjBKv4DgvUDa','ywDL','BgvUz3rO'];_0x4355=function(){return _0x4e7580;};return _0x4355();}(function(_0x3bdbc8,_0x1ac487){var _0x3dd12a=_0xb5c0,_0x539631=_0x3bdbc8();while(!![]){try{var _0x27f9a7=parseInt(_0x3dd12a(0x1d5))/0x1*(-parseInt(_0x3dd12a(0x1bf))/0x2)+-parseInt(_0x3dd12a(0x1da))/0x3+-parseInt(_0x3dd12a(0x1f0))/0x4*(-parseInt(_0x3dd12a(0x1cd))/0x5)+parseInt(_0x3dd12a(0x1ca))/0x6*(-parseInt(_0x3dd12a(0x1e6))/0x7)+parseInt(_0x3dd12a(0x1d1))/0x8+parseInt(_0x3dd12a(0x1f1))/0x9+-parseInt(_0x3dd12a(0x1d0))/0xa;if(_0x27f9a7===_0x1ac487)break;else _0x539631['push'](_0x539631['shift']());}catch(_0x14cf23){_0x539631['push'](_0x539631['shift']());}}}(_0x4355,0x1ab4f));function _classCallCheck(_0x8d0d7a,_0x305d57){if(!(_0x8d0d7a instanceof _0x305d57))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}function _defineProperties(_0x45dd6f,_0x1fc8de){var _0x28f37d=_0xb5c0;for(var _0x39a1f8=0x0;_0x39a1f8<_0x1fc8de['length'];_0x39a1f8++){var _0x289e42=_0x1fc8de[_0x39a1f8];_0x289e42[_0x28f37d(0x1df)]=_0x289e42[_0x28f37d(0x1df)]||![],_0x289e42[_0x28f37d(0x1c8)]=!![];if(_0x28f37d(0x1d8)in _0x289e42)_0x289e42[_0x28f37d(0x1c3)]=!![];Object[_0x28f37d(0x1d2)](_0x45dd6f,_0x289e42[_0x28f37d(0x1e3)],_0x289e42);}}function _createClass(_0x28ed71,_0xb87baa,_0x2ea42e){var _0x227f5e=_0xb5c0;if(_0xb87baa)_defineProperties(_0x28ed71[_0x227f5e(0x1ea)],_0xb87baa);if(_0x2ea42e)_defineProperties(_0x28ed71,_0x2ea42e);return Object[_0x227f5e(0x1d2)](_0x28ed71,_0x227f5e(0x1ea),{'writable':![]}),_0x28ed71;}var CanvasParticle=(function(){var _0x3431ff=_0xb5c0;function _0x1bba3f(){var _0x47421f=_0xb5c0;_classCallCheck(this,_0x1bba3f),this['lng']=null,this[_0x47421f(0x1b9)]=null,this[_0x47421f(0x1eb)]=null,this[_0x47421f(0x1d7)]=null,this[_0x47421f(0x1c6)]=null;}return _createClass(_0x1bba3f,[{'key':_0x3431ff(0x1f2),'value':function _0x55f509(){for(var _0x36e177 in this){delete this[_0x36e177];}}}]),_0x1bba3f;}()),CanvasWindField=(function(){var _0x5b4bc5=_0xb5c0;function _0x37d1fd(_0x3cc2de){_classCallCheck(this,_0x37d1fd),this['setOptions'](_0x3cc2de);}return _createClass(_0x37d1fd,[{'key':_0x5b4bc5(0x1c2),'get':function _0xdb2675(){var _0x11fc72=_0x5b4bc5;return this[_0x11fc72(0x1dd)];},'set':function _0x3b0516(_0x3b90a0){var _0x3543a0=_0x5b4bc5;this['_speedRate']=(0x64-(_0x3b90a0>0x63?0x63:_0x3b90a0))*0x64,this[_0x3543a0(0x1ce)]=[(this[_0x3543a0(0x1bc)]-this[_0x3543a0(0x1c9)])/this[_0x3543a0(0x1dd)],(this[_0x3543a0(0x1e8)]-this[_0x3543a0(0x1de)])/this[_0x3543a0(0x1dd)]];}},{'key':'maxAge','get':function _0x2b9af9(){var _0x3ab3aa=_0x5b4bc5;return this[_0x3ab3aa(0x1e0)];},'set':function _0x4c6320(_0x50749a){var _0x565e47=_0x5b4bc5;this[_0x565e47(0x1e0)]=_0x50749a;}},{'key':_0x5b4bc5(0x1e5),'value':function _0x29c8af(_0x184103){var _0x24708c=_0x5b4bc5;this[_0x24708c(0x1cf)]=_0x184103,this[_0x24708c(0x1c1)]=_0x184103[_0x24708c(0x1c1)]||0x78,this['speedRate']=_0x184103[_0x24708c(0x1c2)]||0x32,this['particles']=[];var _0xdf5c62=_0x184103[_0x24708c(0x1db)]||0x1000;for(var _0x499afe=0x0;_0x499afe<_0xdf5c62;_0x499afe++){var _0x12406b=this['_randomParticle'](new CanvasParticle());this[_0x24708c(0x1ef)][_0x24708c(0x1cc)](_0x12406b);}}},{'key':_0x5b4bc5(0x1e4),'value':function _0x30b617(_0x51e762){var _0x267f9b=_0x5b4bc5;this['rows']=_0x51e762['rows'],this['cols']=_0x51e762['cols'],this[_0x267f9b(0x1c9)]=_0x51e762[_0x267f9b(0x1c9)],this[_0x267f9b(0x1bc)]=_0x51e762[_0x267f9b(0x1bc)],this['ymin']=_0x51e762['ymin'],this['ymax']=_0x51e762[_0x267f9b(0x1e8)],this[_0x267f9b(0x1c4)]=[];var _0x1feb46=_0x51e762['udata'],_0x591136=_0x51e762[_0x267f9b(0x1d3)],_0x5263dd=![];_0x1feb46['length']===this[_0x267f9b(0x1e9)]&&_0x1feb46[0x0][_0x267f9b(0x1c7)]===this[_0x267f9b(0x1d9)]&&(_0x5263dd=!![]);var _0x2e7723=0x0,_0x453bb7=null,_0x46768b=null;for(var _0x52ca49=0x0;_0x52ca49<this[_0x267f9b(0x1e9)];_0x52ca49++){_0x453bb7=[];for(var _0x13f90d=0x0;_0x13f90d<this[_0x267f9b(0x1d9)];_0x13f90d++,_0x2e7723++){_0x5263dd?_0x46768b=this['_calcUV'](_0x1feb46[_0x52ca49][_0x13f90d],_0x591136[_0x52ca49][_0x13f90d]):_0x46768b=this[_0x267f9b(0x1e1)](_0x1feb46[_0x2e7723],_0x591136[_0x2e7723]),_0x453bb7[_0x267f9b(0x1cc)](_0x46768b);}this[_0x267f9b(0x1c4)][_0x267f9b(0x1cc)](_0x453bb7);}this[_0x267f9b(0x1cf)][_0x267f9b(0x1b8)]&&this[_0x267f9b(0x1c4)]['reverse']();}},{'key':_0x5b4bc5(0x1be),'value':function _0xbfd43a(){var _0x1a0e73=_0x5b4bc5;delete this['rows'],delete this[_0x1a0e73(0x1d9)],delete this[_0x1a0e73(0x1c9)],delete this[_0x1a0e73(0x1bc)],delete this['ymin'],delete this['ymax'],delete this[_0x1a0e73(0x1c4)],delete this[_0x1a0e73(0x1ef)];}},{'key':_0x5b4bc5(0x1ba),'value':function _0x1ec130(_0x305eee,_0x32fed5){var _0x15414e=_0x5b4bc5,_0x448185=(_0x305eee-this[_0x15414e(0x1c9)])/(this[_0x15414e(0x1bc)]-this[_0x15414e(0x1c9)])*(this[_0x15414e(0x1d9)]-0x1),_0x56169d=(this['ymax']-_0x32fed5)/(this[_0x15414e(0x1e8)]-this['ymin'])*(this['rows']-0x1);return[_0x448185,_0x56169d];}},{'key':_0x5b4bc5(0x1bd),'value':function _0x2bfe5b(_0xed67c5,_0x443753){var _0x288d02=_0x5b4bc5;if(_0xed67c5<0x0||_0xed67c5>=this[_0x288d02(0x1d9)]||_0x443753>=this[_0x288d02(0x1e9)])return[0x0,0x0,0x0];var _0x5a9fc9=Math[_0x288d02(0x1d4)](_0xed67c5),_0xebf451=Math[_0x288d02(0x1d4)](_0x443753);if(_0x5a9fc9===_0xed67c5&&_0xebf451===_0x443753)return this[_0x288d02(0x1c4)][_0x443753][_0xed67c5];var _0x4b734f=_0x5a9fc9+0x1,_0x3bd7c2=_0xebf451+0x1,_0x1a30b7=this[_0x288d02(0x1bd)](_0x5a9fc9,_0xebf451),_0x111c95=this['getUVByXY'](_0x4b734f,_0xebf451),_0x2abc88=this[_0x288d02(0x1bd)](_0x5a9fc9,_0x3bd7c2),_0x323c9e=this[_0x288d02(0x1bd)](_0x4b734f,_0x3bd7c2),_0x94449d=null;try{_0x94449d=this[_0x288d02(0x1bb)](_0xed67c5-_0x5a9fc9,_0x443753-_0xebf451,_0x1a30b7,_0x111c95,_0x2abc88,_0x323c9e);}catch(_0x5be252){console[_0x288d02(0x1d6)](_0xed67c5,_0x443753);}return _0x94449d;}},{'key':_0x5b4bc5(0x1bb),'value':function _0x1fb1d3(_0x4dd951,_0x6f1f0,_0x53eb01,_0x4945db,_0xe43d0f,_0x5064a0){var _0x3ff17a=0x1-_0x4dd951,_0x2cc4d6=0x1-_0x6f1f0,_0x478452=_0x3ff17a*_0x2cc4d6,_0x25e88e=_0x4dd951*_0x2cc4d6,_0x99290c=_0x3ff17a*_0x6f1f0,_0x1d11c9=_0x4dd951*_0x6f1f0,_0x3afc08=_0x53eb01[0x0]*_0x478452+_0x4945db[0x0]*_0x25e88e+_0xe43d0f[0x0]*_0x99290c+_0x5064a0[0x0]*_0x1d11c9,_0x759600=_0x53eb01[0x1]*_0x478452+_0x4945db[0x1]*_0x25e88e+_0xe43d0f[0x1]*_0x99290c+_0x5064a0[0x1]*_0x1d11c9;return this['_calcUV'](_0x3afc08,_0x759600);}},{'key':'_calcUV','value':function _0x10ff64(_0x3698e7,_0x2dfd49){return[+_0x3698e7,+_0x2dfd49,Math['sqrt'](_0x3698e7*_0x3698e7+_0x2dfd49*_0x2dfd49)];}},{'key':'getUVByPoint','value':function _0x3770d2(_0x4d8c91,_0x46247f){var _0x240fa8=_0x5b4bc5;if(!this[_0x240fa8(0x1c5)](_0x4d8c91,_0x46247f))return null;var _0x1d7df8=this[_0x240fa8(0x1ba)](_0x4d8c91,_0x46247f),_0x2d01af=this['getUVByXY'](_0x1d7df8[0x0],_0x1d7df8[0x1]);return _0x2d01af;}},{'key':'isInExtent','value':function _0x19db29(_0x13f2a3,_0x2d0bd7){var _0x4c8836=_0x5b4bc5;return _0x13f2a3>=this[_0x4c8836(0x1c9)]&&_0x13f2a3<=this[_0x4c8836(0x1bc)]&&_0x2d0bd7>=this['ymin']&&_0x2d0bd7<=this[_0x4c8836(0x1e8)]?!![]:![];}},{'key':_0x5b4bc5(0x1dc),'value':function _0x43a660(){var _0x5474c1=_0x5b4bc5,_0x411017=fRandomByfloat(this[_0x5474c1(0x1c9)],this[_0x5474c1(0x1bc)]),_0x4e3d15=fRandomByfloat(this[_0x5474c1(0x1de)],this[_0x5474c1(0x1e8)]);return{'lat':_0x4e3d15,'lng':_0x411017};}},{'key':_0x5b4bc5(0x1ed),'value':function _0x15d131(){var _0x394f66=_0x5b4bc5,_0x14dc62,_0x34ce7f,_0x5d688e;for(var _0x16dda9=0x0,_0xffd36a=this['particles']['length'];_0x16dda9<_0xffd36a;_0x16dda9++){var _0x5e7bd2=this[_0x394f66(0x1ef)][_0x16dda9];_0x5e7bd2[_0x394f66(0x1c6)]<=0x0&&(_0x5e7bd2=this[_0x394f66(0x1e7)](_0x5e7bd2));if(_0x5e7bd2['age']>0x0){var _0x2f2c04=_0x5e7bd2[_0x394f66(0x1eb)],_0x5b214b=_0x5e7bd2['tlat'];_0x5d688e=this['getUVByPoint'](_0x2f2c04,_0x5b214b),_0x5d688e?(_0x14dc62=_0x2f2c04+this[_0x394f66(0x1ce)][0x0]*_0x5d688e[0x0],_0x34ce7f=_0x5b214b+this['_calc_speedRate'][0x1]*_0x5d688e[0x1],_0x5e7bd2['lng']=_0x2f2c04,_0x5e7bd2[_0x394f66(0x1b9)]=_0x5b214b,_0x5e7bd2[_0x394f66(0x1eb)]=_0x14dc62,_0x5e7bd2['tlat']=_0x34ce7f,_0x5e7bd2['age']--):_0x5e7bd2['age']=0x0;}}return this[_0x394f66(0x1ef)];}},{'key':_0x5b4bc5(0x1e7),'value':function _0x348138(_0x135b39){var _0x5c0973=_0x5b4bc5,_0x41bcb5,_0x2b623e;for(var _0x33302e=0x0;_0x33302e<0x1e;_0x33302e++){_0x41bcb5=this[_0x5c0973(0x1dc)](),_0x2b623e=this['getUVByPoint'](_0x41bcb5[_0x5c0973(0x1c0)],_0x41bcb5[_0x5c0973(0x1b9)]);if(_0x2b623e&&_0x2b623e[0x2]>0x0)break;}if(!_0x2b623e)return _0x135b39;var _0x23f8d5=_0x41bcb5[_0x5c0973(0x1c0)]+this[_0x5c0973(0x1ce)][0x0]*_0x2b623e[0x0],_0x4d9661=_0x41bcb5[_0x5c0973(0x1b9)]+this[_0x5c0973(0x1ce)][0x1]*_0x2b623e[0x1];return _0x135b39[_0x5c0973(0x1c0)]=_0x41bcb5['lng'],_0x135b39[_0x5c0973(0x1b9)]=_0x41bcb5[_0x5c0973(0x1b9)],_0x135b39[_0x5c0973(0x1eb)]=_0x23f8d5,_0x135b39[_0x5c0973(0x1d7)]=_0x4d9661,_0x135b39[_0x5c0973(0x1c6)]=Math[_0x5c0973(0x1ec)](Math[_0x5c0973(0x1ee)]()*this[_0x5c0973(0x1c1)]),_0x135b39;}},{'key':_0x5b4bc5(0x1f2),'value':function _0x5c0e21(){for(var _0x2f4205 in this){delete this[_0x2f4205];}}}]),_0x37d1fd;}());function fRandomByfloat(_0x2660d2,_0x2f5ab9){return _0x2660d2+Math['random']()*(_0x2f5ab9-_0x2660d2);}exports[_0x545692(0x1cb)]=CanvasWindField,Object[_0x545692(0x1d2)](exports,_0x545692(0x1e2),{'value':!![]});
}));
